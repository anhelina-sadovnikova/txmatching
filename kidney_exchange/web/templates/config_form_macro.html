{% macro form_from_configuration(configuration, enable_configuration) %}
<div class="configuration">
    <form action="configuration" method="post" id="configuration-form">

        <div class="configuration__boxes">
            <div>
                <div class="configuration__box checkboxes">
                    <label>
                        <input type="checkbox" value="on" name="enforce_compatible_blood_group"
                               {{ "checked" if configuration.enforce_compatible_blood_group }}>
                        Require compatible blood group
                    </label>

                    <label>
                    <input type="checkbox" value="on"
                           name="require_new_donor_having_better_match_in_compatibility_index"
                           {{ "checked" if configuration.require_new_donor_having_better_match_in_compatibility_index
                    }}>
                    Require new donor having better CI match than original donor
                    </label>

                    <label>
                    <input type="checkbox" value="on"
                           name="require_new_donor_having_better_match_in_compatibility_index_or_blood_group"
                           {{ "checked" if
                    configuration.require_new_donor_having_better_match_in_compatibility_index_or_blood_group
                    }}>
                    Require new donor having better CI match than original donor or blood group match
                    </label>

                    <label>
                    <input type="checkbox" value="on" name="use_binary_scoring" {{ "checked" if
                    configuration.use_binary_scoring }}>
                    Use binary scoring
                    </label>
                </div>

                <div class="configuration__box inputs">
                    <label>
                        <span>Min transplant score</span>
                        <input type="number" value="{{ configuration.minimum_total_score }}" name="minimum_total_score"><br><br>
                    </label>

                    <label>
                        <span>Max cycle length</span>
                        <input type="number" value="{{ configuration.max_cycle_length }}" name="max_cycle_length"><br><br>
                    </label>

                    <label>
                        <span>Max sequence length</span>
                        <input type="number" value="{{ configuration.max_sequence_length }}" name="max_sequence_length"><br><br>
                    </label>

                    <label>
                        <span>Max countries in sequence</span>
                        <input type="number" value="{{ configuration.max_number_of_distinct_countries_in_round }}"
                               name="max_number_of_distinct_countries_in_round">
                    </label>

                </div>
            </div>

            <div class="configuration__box manual">
                <b>Manual donor recipient scores</b>
                <div class="manual-row">
                    <div>
                        <p>
                            Fill in a list of such manual settings. Format:
                            <code>[(donor_name,recipient_name,score)]</code>
                            Example:
                            <code>[("D1","R1",23), ("D1","R1",-1)]</code>
                            Use <strong>-1</strong> for forbidden exchanges.
                        </p>
                    </div>
                    <textarea cols="60" rows="7" name="manual_donor_recipient_scores_dto">{{ configuration.manual_donor_recipient_scores_dto }}</textarea>
                </div>
            </div>
        </div>

        {% if enable_configuration %}
        <input type="submit" value="Recalculate">
        {% else %}
        You are just a viewer, you are not allowed to submit recalculation
        {% endif %}
    </form>

</div>

{% endmacro %}
